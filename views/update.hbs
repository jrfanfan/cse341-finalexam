<p id="data2"></p>

<script>
    async function apiFetch(url) {
        const response = await fetch(url);
        const data = await response.json();
        return data;
    }
    async function updateData() {
        const data = await apiFetch('/data');
        let text = "";
        text = `<table>`
        text += `<tr>`
        text +=`<th>Firstname</th>`
        text +=`<th>Lastname</th>`
        text +=`<th>Email</th>`
        text +=`<th>ID</th>`
        text +=`<th>Update</th>`
        text +=`</tr>`
        for (let i = 0; i < data.length; i++) {
            text += `<tr>`
            text += `<form name="form2" action="/dataupdate/${data[i]._id}" method="put">`
            text += `<td>` 
            text += `<input type="text" id="firstname" value="${data[i].firstname}" required>`
            text += `</td>`
            text += `<td>`
            text += `<input type="text" name="lastname" value="${data[i].lastname}" required>`
            text += `</td> `
            text += `<td>`
            text += `<input type="text" name="email" value="${data[i].email}" required>`
            text += `</td>` 
            text += `<td>`
            text += `<input type="number" name="idnumber" value="${data[i].idnumber}" required>`
            text += `</td>` 
            text += `<td><a href="/dataupdate/${data[i]._id}">Update</a></td>`  
            text += `</form>`  
            text += `</tr>`
        }
        text += `</table>`
        document.getElementById("data2").innerHTML= text;
    }
    updateData();
    //submit my form2
    function submit_form2() {
        document.form2.submit();
    }
</script>